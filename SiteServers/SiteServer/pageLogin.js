var $api=new apiUtils.Api($apiConfig.apiUrl+"/v1/administrators/actions/login"),$innerApi=new apiUtils.Api($apiConfig.innerApiUrl+"/v1/administrators/actions/login"),$captchaGetUrl=$apiConfig.innerApiUrl+"/v1/captcha/LOGIN-CAPTCHA",$captchaCheckApi=new apiUtils.Api($apiConfig.innerApiUrl+"/v1/captcha/LOGIN-CAPTCHA/actions/check");window.top!=self&&(window.top.location=self.location);var $vue=new Vue({el:"#main",data:{pageLoad:!1,pageSubmit:!1,pageAlert:null,account:null,password:null,isAutoLogin:!1,captcha:null,captchaUrl:null},directives:{focus:{inserted:function(i){i.focus()}}},methods:{reload:function(){this.pageLoad=!0,this.captchaUrl=$captchaGetUrl+"?r="+(new Date).getTime()},checkCaptcha:function(){var i=this;pageUtils.loading(!0),$captchaCheckApi.post({captcha:i.captcha},function(a,t){if(pageUtils.loading(!1),a)return void(i.pageAlert={type:"danger",html:"验证码不正确，请重新输入！"});i.login()})},login:function(){var i=this;pageUtils.loading(!0),$innerApi.post({account:i.account,password:md5(i.password),isAutoLogin:i.isAutoLogin},function(a,t){if(pageUtils.loading(!1),a)return void(i.pageAlert={type:"danger",html:a.message});$apiConfig.isSeparatedApi?i.loginSeparatedApi():i.redirect()})},loginSeparatedApi:function(){var i=this;pageUtils.loading(!0),$api.post({account:i.account,password:md5(i.password),isAutoLogin:i.isAutoLogin},function(a,t){if(pageUtils.loading(!1),a)return void(i.pageAlert={type:"danger",html:'系统检测到API部署方式为独立部署且独立API不能正常工作，请联系系统维护人员修复此问题 <a href="pageInitialization.aspx">进入后台</a>'});i.redirect()})},redirect:function(){location.href="pageInitialization.aspx"},btnLoginClick:function(i){i.preventDefault(),this.pageSubmit=!0,this.pageAlert=null,this.account&&this.password&&this.captcha&&this.checkCaptcha()}}});$vue.reload();
var pluginId=utils.getQueryString("pluginId"),returnUrl=utils.getQueryString("returnUrl"),$url="/pages/plugins/view/"+pluginId,data={pageLoad:!1,pageAlert:null,isNightly:null,pluginVersion:null,installed:null,installedVersion:null,package:null,isShouldUpdate:!1,pluginInfo:{},releaseInfo:{},userInfo:{}},methods={getIconUrl:function(e){return e&&-1!==e.indexOf("://")?e:"http://plugins.siteserver.cn/"+e},getTagNames:function(e){var n=[];return e.tags&&(n=e.tags.split(",")),n},load:function(){var e=this;$api.get($url).then(function(n){var l=n.data;e.isNightly=l.isNightly,e.pluginVersion=l.pluginVersion,e.installed=l.installed,e.installedVersion=l.installedVersion,e.package=l.package||{},$apiCloud.get("plugins/"+pluginId,{params:{isNightly:e.isNightly,pluginVersion:e.pluginVersion}}).then(function(n){var l=n.data;e.pluginInfo=l.value.pluginInfo,e.releaseInfo=l.value.releaseInfo,e.userInfo=l.value.userInfo,e.isShouldUpdate=-1==compareversion(e.installedVersion,e.releaseInfo.version)}).catch(function(n){e.pageAlert=utils.getPageAlert({message:"系统在线获取插件信息失败，请检查网络环境是否能够访问外网"})}).then(function(){e.pageLoad=!0})}).catch(function(n){e.pageAlert=utils.getPageAlert(n)}).then(function(){e.pageLoad=!0})},btnReturn:function(){location.href=returnUrl}},$vue=new Vue({el:"#main",data:data,methods:methods,created:function(){this.load()}});
function MirrorFrame(r,e){this.home=document.createElement("DIV"),r.appendChild?r.appendChild(this.home):r(this.home);var t=this;function n(r,e){var n=document.createElement("INPUT");n.type="button",n.value=r,t.home.appendChild(n),n.onclick=function(){t[e].call(t)}}n("Search","search"),n("Replace","replace"),n("Current line","line"),n("Jump to line","jump"),n("Insert constructor","macro"),n("Indent all","reindent"),this.mirror=new CodeMirror(this.home,e)}MirrorFrame.prototype={search:function(){var r=prompt("Enter search term:","");if(r){var e=!0;do{var t=this.mirror.getSearchCursor(r,e);for(e=!1;t.findNext();)if(t.select(),!confirm("Search again?"))return}while(confirm("End of document reached. Start over?"))}},replace:function(){var r,e=prompt("Enter search string:","");if(e&&(r=prompt("What should it be replaced with?","")),null!=r)for(var t=this.mirror.getSearchCursor(e,!1);t.findNext();)t.replace(r)},jump:function(){var r=prompt("Jump to line:","");r&&!isNaN(Number(r))&&this.mirror.jumpToLine(Number(r))},line:function(){alert("The cursor is currently at line "+this.mirror.currentLine()),this.mirror.focus()},macro:function(){var r=prompt("Name your constructor:","");r&&this.mirror.replaceSelection("function "+r+"() {\n  \n}\n\n"+r+".prototype = {\n  \n};\n")},reindent:function(){this.mirror.reindent()}};
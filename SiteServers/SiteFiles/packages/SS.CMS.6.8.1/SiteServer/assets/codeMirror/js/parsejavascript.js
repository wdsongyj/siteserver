var JSParser=Editor.Parser=function(){var n={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function t(n,t,e,i,r,o){this.indented=n,this.column=t,this.type=e,null!=i&&(this.align=i),this.prev=r,this.info=o}return{make:function(e,i){var r,o,a=tokenizeJavaScript(e),c=[function n(t){return h(j,n)}],u=null,f=new t((i||0)-indentUnit,0,"block",!1),l=0,s=0,v={next:function(){for(;c[c.length-1].lex;)c.pop()();var n=a.next();if("whitespace"==n.type&&0==l&&(s=n.value.length),l+=n.value.length,"\n"==n.content&&(s=l=0,"align"in f||(f.align=!1),n.indentation=function(n){return function(t){var e=t&&t.charAt(0),i=n.type,r=e==i;return"vardef"==i?n.indented+4:"form"==i&&"{"==e?n.indented:"stat"==i||"form"==i?n.indented+indentUnit:"switch"!=n.info||r?n.align?n.column-(r?1:0):n.indented+(r?0:indentUnit):n.indented+(/^(?:case|default)\b/.test(t)?indentUnit:2*indentUnit)}}(f)),"whitespace"==n.type||"comment"==n.type)return n;"align"in f||(f.align=!0);for(;;)if(r=o=!1,c.pop()(n.type,n.content),r)return o?n.style=o:"variable"==n.type&&w(n.content)&&(n.style="js-localvariable"),n},copy:function(){var n=u,t=f,e=c.concat([]),i=a.state;return function(r){return u=n,f=t,c=e.concat([]),l=s=0,a=tokenizeJavaScript(r,i),v}}};function p(n){for(var t=n.length-1;t>=0;t--)c.push(n[t])}function d(){p(arguments),r=!0}function h(){p(arguments),r=!1}function y(n){o=n}function b(){u={prev:u,vars:{this:!0,arguments:!0}}}function m(){u=u.prev}function g(n){u&&(y("js-variabledef"),u.vars[n]=!0)}function w(n){for(var t=u;t;){if(t.vars[n])return!0;t=t.prev}return!1}function k(n,e){var i=function(){f=new t(s,l,n,null,f,e)};return i.lex=!0,i}function x(){f=f.prev}function U(n){return function(t){t==n?d():d(arguments.callee)}}function j(n){"var"==n?d(k("vardef"),E,U(";"),x):"keyword a"==n?d(k("form"),P,j,x):"keyword b"==n?d(k("form"),j,x):"{"==n?d(k("}"),C,x):"function"==n?d(H):"for"==n?d(k("form"),U("("),k(")"),B,U(")"),x,j,x):"variable"==n?d(k("stat"),S):"switch"==n?d(k("form"),P,k("}","switch"),U("{"),C,x,x):"case"==n?d(P,U(":")):"default"==n?d(U(":")):"catch"==n?d(k("form"),b,U("("),I,U(")"),j,x,m):h(k("stat"),P,U(";"),x)}function P(t){n.hasOwnProperty(t)?d(J):"function"==t?d(H):"keyword c"==t?d(P):"("==t?d(k(")"),P,U(")"),x,J):"operator"==t?d(P):"["==t?d(k("]"),A(P,"]"),x,J):"{"==t&&d(k("}"),A(O,"}"),x,J)}function J(n){"operator"==n?d(P):"("==n?d(k(")"),P,A(P,")"),x,J):"."==n?d(z,J):"["==n&&d(k("]"),P,U("]"),x,J)}function S(n){":"==n?d(x,j):h(J,U(";"),x)}function z(n){"variable"==n&&(y("js-property"),d())}function O(t){"variable"==t&&y("js-property"),n.hasOwnProperty(t)&&d(U(":"),P)}function A(n,t){function e(i){","==i?d(n,e):i==t?d():d(U(t))}return function(i){i==t?d():h(n,e)}}function C(n){"}"==n?d():h(j,C)}function E(n,t){"variable"==n?(g(t),d(q)):d()}function q(n,t){"="==t?d(P,q):","==n&&d(E)}function B(n){"var"==n?d(E,F):";"==n?h(F):"variable"==n?d(D):h(F)}function D(n,t){"in"==t?d(P):d(J,F)}function F(n,t){";"==n?d(G):"in"==t?d(P):d(P,U(";"),G)}function G(n){")"==n?h():d(P)}function H(n,t){"variable"==n?(g(t),d(H)):"("==n&&d(b,A(I,")"),j,m)}function I(n,t){"variable"==n&&(g(t),d())}return x.lex=!0,v},electricChars:"{}:"}}();
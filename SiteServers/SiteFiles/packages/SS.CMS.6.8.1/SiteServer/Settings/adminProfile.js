var $url="/pages/settings/adminProfile",$pageTypeAdmin="admin",$pageTypeUser="user",data={pageLoad:!1,pageAlert:null,pageType:utils.getQueryString("pageType"),userId:parseInt(utils.getQueryString("userId")||"0"),adminInfo:null,departments:null,areas:null,password:null,confirmPassword:null,uploadUrl:null,files:[]},methods={getConfig:function(){var e=this;$api.get($url+"?userId="+e.userId).then(function(t){var a=t.data;e.adminInfo=a.value,e.departments=a.departments,e.areas=a.areas,e.uploadUrl=apiUrl+"/pages/settings/adminProfile/upload?adminToken="+a.adminToken+"&userId="+e.userId}).catch(function(t){e.pageAlert=utils.getPageAlert(t)}).then(function(){e.pageLoad=!0})},inputAvatar(e,t){Boolean(e)===Boolean(t)&&t.error===e.error||this.$refs.avatar.active||(this.$refs.avatar.active=!0),e&&t&&e.xhr&&e.success!==t.success&&(this.adminInfo.avatarUrl=e.response.value)},submit:function(){var e=this;pageUtils.loading(!0),$api.post($url+"?userId="+e.userId,_.assign({},e.adminInfo,{password:e.password})).then(function(t){t.data;swal({toast:!0,type:"success",title:"管理员资料保存成功！",showConfirmButton:!1,timer:3e3}).then(function(){e.pageType==$pageTypeAdmin?e.btnReturnClick():top.location.reload(!0)})}).catch(function(t){e.pageAlert=utils.getPageAlert(t)}).then(function(){pageUtils.loading(!1)})},btnSubmitClick:function(){this.pageAlert=null;var e=this;this.adminInfo.id>0&&this.password!=this.confirmPassword||this.$validator.validate().then(function(t){t&&e.submit()})},btnReturnClick:function(){location.href="pageAdministrator.aspx"}};new Vue({el:"#main",data:data,components:{FileUpload:VueUploadComponent},methods:methods,created:function(){this.getConfig()}});
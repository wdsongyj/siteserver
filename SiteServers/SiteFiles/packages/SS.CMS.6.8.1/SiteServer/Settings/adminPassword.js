var $url="/pages/settings/adminPassword",$pageTypeAdmin="admin",$pageTypeUser="user",data={pageLoad:!1,pageAlert:null,pageType:utils.getQueryString("pageType"),userId:parseInt(utils.getQueryString("userId")||"0"),adminInfo:null,password:null,confirmPassword:null},methods={getConfig:function(){var t=this;$api.get($url+"?userId="+t.userId).then(function(e){var n=e.data;t.adminInfo=n.value}).catch(function(e){t.pageAlert=utils.getPageAlert(e)}).then(function(){t.pageLoad=!0})},submit:function(){var t=this;pageUtils.loading(!0),$api.post($url+"?userId="+t.userId,{password:t.password}).then(function(e){e.data;swal({toast:!0,type:"success",title:"密码更改成功！",showConfirmButton:!1,timer:3e3}).then(function(){t.pageType==$pageTypeAdmin?t.btnReturnClick():top.location.reload(!0)})}).catch(function(e){t.pageAlert=utils.getPageAlert(e)}).then(function(){pageUtils.loading(!1)})},btnSubmitClick:function(){this.pageAlert=null;var t=this;this.adminInfo.id>0&&this.password!=this.confirmPassword||this.$validator.validate().then(function(e){e&&t.submit()})},btnReturnClick:function(){location.href="pageAdministrator.aspx"}};new Vue({el:"#main",data:data,methods:methods,created:function(){this.getConfig()}});
var config={apiUrl:"../api"},alert=swal.mixin({confirmButtonClass:"btn btn-primary",cancelButtonClass:"btn btn-default ml-3",buttonsStyling:!1});VeeValidate.Validator.localize("zh_CN"),Vue.use(VeeValidate),VeeValidate.Validator.localize({zh_CN:{messages:{required:function(e){return e+"不能为空"}}}}),VeeValidate.Validator.extend("mobile",{getMessage:function(){return" 请输入正确的手机号码"},validate:function(e,t){return 11==e.length&&/^((13|14|15|16|17|18|19)[0-9]{1}\d{8})$/.test(e)}});var utils={Api:function(e,t){this.apiUrl=utils.getApiUrl(e,t),this._getURL=function(e,t,n){if(e+=/\?/.test(e)?"&":"?","object"==typeof t&&"GET"===n){var r=[];for(var i in t)if(t.hasOwnProperty(i)){var o=encodeURIComponent(i),a=encodeURIComponent(t[i]);r.push(o+"="+a)}e+="&"+r.join("&")}return(e+"&"+(new Date).getTime()).replace("?&","?")},this.request=function(e,t,n,r){var i=new XMLHttpRequest;i.open(e,this._getURL(t,n,e),!0),i.withCredentials=!0,r&&(i.onreadystatechange=function(){if(4===i.readyState)if(i.status<400)r(null,utils.parse(i.responseText),i.status);else{var e=utils.parse(i.responseText);r({status:i.status,message:e.message||utils.errorCode(i.status)},null,i.status)}}),i.dataType="json",i.setRequestHeader("Accept","application/vnd.siteserver+json; version=1"),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n?i.send(JSON.stringify(n)):i.send()},this.get=function(e,t,n){var r=this.apiUrl;return n&&(r+="/"+n),this.request("GET",r,e,t)},this.post=function(e,t,n){var r=this.apiUrl;return n&&(r+="/"+n),this.request("POST",r,e,t)},this.put=function(e,t,n){var r=this.apiUrl;return n&&(r+="/"+n),this.request("PUT",r,e,t)},this.delete=function(e,t,n){var r=this.apiUrl;return n&&(r+="/"+n),this.request("DELETE",r,e,t)},this.patch=function(e,t,n){var r=this.apiUrl;return n&&(r+="/"+n),this.request("PATCH",r,e,t)}},getApiUrl:function(e,t){var n=_.trimEnd(config.apiUrl,"/");return t||-1===n.indexOf("..")||(n="../"+n),n+="/"+_.trimStart(e,"/")},parse:function(e){try{return e?JSON.parse(e):{}}catch(e){return{}}},errorCode:function(e){switch(e){case 400:return"Bad Request";case 401:return"Unauthorized";case 402:return"Payment Required";case 403:return"Forbidden";case 404:return"Not Found";case 405:return"Method Not Allowed";case 406:return"Not Acceptable";case 407:return"Proxy Authentication Required";case 408:return"Request Timeout";case 409:return"Conflict";case 410:return"Gone";case 411:return"Length Required";case 500:return"Internal Server Error"}return"Unknown Error"},getQueryString:function(e){var t=location.search.match(new RegExp("[?&]"+e+"=([^&]+)","i"));return!t||t.length<1?"":decodeURIComponent(t[1])},getToken:function(){return Cookies.get("SS-USER-TOKEN-CLIENT")},setToken:function(e,t){Cookies.set("SS-USER-TOKEN-CLIENT",e,{expires:new Date(t)})},removeToken:function(){Cookies.remove("SS-USER-TOKEN-CLIENT")},redirectLogin:function(){location.hash?location.href="pages/login.html":top.location.hash="pages/login.html"},loading:function(e){if(e)return layer.load(1,{shade:[.2,"#000"]});layer.close(layer.index)},scrollToTop:function(){document.documentElement.scrollTop=document.body.scrollTop=0},closeLayer:function(){return parent.layer.closeAll(),!1},openLayer:function(e){return!(!e||!e.url)&&(e.width||(e.width=$(window).width()-50),e.height||(e.height=$(window).height()-50),e.full&&(e.width=$(window).width()-50,e.height=$(window).height()-50),layer.open({type:2,btn:null,title:e.title,area:[e.width+"px",e.height+"px"],maxmin:!0,resize:!0,shadeClose:!0,content:e.url}),!1)},openImagesLayer:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push({src:r,thumb:r})}layer.photos({photos:{data:t},anim:5})},getConfig:function(e,t,n){var r=new utils.Api("/home",n);"string"==typeof e&&(e={pageName:e}),r.get(e,function(n,i){n&&r.get(e,function(e,n){if(e)return utils.alertError(e);n.config.isHomeClosed&&alert({title:"用户中心已关闭！",type:"error",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1}),t(n)}),i.config.isHomeClosed&&alert({title:"用户中心已关闭！",text:" ",type:"error",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1}),t(i)})},alertError:function(e){alert({title:"系统错误！",text:"请联系管理员协助解决",type:"error",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1})},alertDelete:function(e){return!!e&&(alert({title:e.title,text:e.text,type:"question",confirmButtonText:"确认删除",confirmButtonClass:"btn btn-danger",showCancelButton:!0,cancelButtonText:"取 消"}).then(function(t){t.value&&e.callback()}),!1)}};